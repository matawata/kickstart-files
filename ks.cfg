#version=RHEL8
ignoredisk --only-use=sda
# System authorization information
auth --enableshadow --passalgo=sha512

# Use network installation
url --url="https://cdn.redhat.com/content/dist/rhel8/8/x86_64/baseos/os/"

# Run the Setup Agent on first boot
firstboot --enable

# System keyboard
keyboard --vckeymap=us --xlayouts='us'

# System language
lang en_US.UTF-8

# Installation logging level
logging --level=info

# Reboot after installation
reboot

# System timezone
timezone America/Chicago --isUtc

# Use text mode install
text

# Network information
network  --bootproto=dhcp --device=eth0 --onboot=on --ipv6=auto --activate

# Root password
rootpw --iscrypted --lock

# System bootloader configuration
bootloader --location=mbr --append=" crashkernel=auto"

# Clear the Master Boot Record
zerombr

# Disk partitioning information
clearpart --all --initlabel
part /boot --fstype=xfs --size=1024
part pv.01 --size=1 --grow
volgroup vg00 --pesize=4096 pv.01
logvol /  --fstype=xfs --grow --size=1 --name=lv_root --vgname=vg00

%packages
@^minimal-environment
kexec-tools
%end

%addon com_redhat_kdump --enable --reserve-mb='auto'
%end
